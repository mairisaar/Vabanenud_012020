<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="img/favicon-32.png" type="image/x-icon">
    <!--<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">-->
    <link type="text/css" rel="stylesheet" href="normalize.css" />
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Rubik:400,500,700,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <title>Vabanenud õppekohad Tartu Ülikoolis</title>
</head>
<body>
    <header>
        <div class="beauty">
            <div class="img"></div>
            <div class="light"></div>
            <div class="main"></div>
        </div>
        <img class="logo"src="img/horisontaal-v.svg" alt="Tartu Ülikooli logo">
    </header>
    <section>
        
        <!---üldinfo-->
        <div class="info">
            <h1>Vabanenud õppekohad Tartu Ülikoolis</h1>
            <p>Vastavalt Tartu Ülikooli <a href="http://www.ut.ee/oke" target="_blank">õppekorralduseeskirjale</a> täidetakse vabad õppekohad avaliku konkursi korras semestri algusest arvates nelja nädala jooksul. Esimese õppeaasta sügissemestril vabu õppekohti ei täideta.</p>
            <p>Lisainfo <a href="https://www.ut.ee/et/oppimine/uliopilasele/oppekohad/vabad_kohad" target="_blank">vabale õppekohale kandideerimise kohta</a>.</p>
            <p id="showDate1"></p>
        </div>

        <!---õppeastmete collapsible pealkirjad
        <div class="levels">
            <button type="button" class="collapsible">Bakalaureuse-, rakenduskõrghariduse- ja integreeritud õppes</button>
            <div class="content">
                <p id="showDate2"></p>
                <p id="showDataB"></p>
            </div>
            <button type="button" class="collapsible">Magistriõppes</button>
            <div class="content">
                <p id="showDate3"></p>
                <p id="showDataM"></p>
            </div>
            <button type="button" class="collapsible">Doktoriõppes</button>
            <div class="content">
                <p id="showDate4"></p>
                <p id="showDataD"></p>
            </div>
        </div>-->

        <div class="search">
            <i class="material-icons search-icon">search</i>
   	        <input type="text" id="myInput" class="searchfield" onkeyup="mySearch()" placeholder="Õppekava">
        </div>

        <div class="data" id="showData"></div>

    </section>
    <footer>
        <p>Õppeosakond ois.tugi@ut.ee</p>
        <div class="shape"></div>
    </footer>
    
    <script>
        // Andmed seisuga kuupäeva kuvamine
        function ShowUpdateDate(id){
        var myDate = {kuupäev: "26.01.2020", kell: "01:23"};
        document.getElementById(id).innerHTML = "Andmed seisuga " + myDate.kuupäev + " kell " + myDate.kell;
        }

        ShowUpdateDate("showDate1");
        //ShowUpdateDate("showDate2");
        //ShowUpdateDate("showDate3");
        //ShowUpdateDate("showDate4");

        //Otsing tabelist

        function mySearch() {
        // muutujad
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("myInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("showData");
            tr = table.getElementsByTagName("tr");

            // vaata läbi tabeli read, peida read, mis ei vasta otsingule
            for (i = 0; i < tr.length; i++) {
                td1 = tr[i].getElementsByTagName("td")[0];
   	            td2 = tr[i].getElementsByTagName("td")[1];
    	        td3 = tr[i].getElementsByTagName("td")[2];
    	        td4 = tr[i].getElementsByTagName("td")[3];
                if (td1 || td2 || td3 || td4) {
                txtValue1 = td1.textContent || td1.innerText;
     	        txtValue2 = td2.textContent || td2.innerText;
     	        txtValue3 = td3.textContent || td3.innerText;
     	        txtValue4 = td4.textContent || td4.innerText;
                if (txtValue1.toUpperCase().indexOf(filter) > -1 || txtValue2.toUpperCase().indexOf(filter) > -1 || txtValue3.toUpperCase().indexOf(filter) > -1 || txtValue4.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                    }
                }
            }
        }

        //tabeli kuvamine
        //json

        var myData = [
            {
                "Valdkond": "HV",
                "Tase": "514",
                "Kood": "120187",
                "Õppekava": "Infokorraldus",
                "2. aasta SÕ": "2",
                "3. aasta PÕ": "5",
                "3. aasta SÕ": "6"            
            },
            {
                "Valdkond": "SV",
                "Tase": "511",
                "Kood": "3132",
                "Õppekava": "Koolieelse lasteasutuse õpetaja mitmekeelses õppekeskkonnas	",
                "1. aasta SÕ": "1",
                "3. aasta PÕ": "6",
                "3. aasta SÕ": "1"            
            },
            {
                "Valdkond": "MV",
                "Tase": "503",
                "Kood": "80418",
                "Õppekava": "Arstiteadus",
                "1. aasta PÕ": "3",
                "2. aasta PÕ": "17",
                "3. aasta PÕ": "32",
                "4. aasta PÕ": "31",
                "5. aasta PÕ": "44",
                "6. aasta PÕ": "38"            
            },
            {
                "Valdkond": "LT",
                "Tase": "511",
                "Kood": "144301",
                "Õppekava": "Füüsika, keemia ja materjaliteadus	",
                "1. aasta PÕ": "7",
                "2. aasta PÕ": "24",
                "3. aasta PÕ": "47"           
            },
            {
                "Valdkond": "HV",
                "Tase": "614",
                "Kood": "136599",
                "Õppekava": "Võõrkeeleõpetaja",
                "1. aasta PÕ": "2",
                "1. aasta SÕ": "1",
                "2. aasta PÕ": "1",
                "2. aasta SÕ": "3"
            },
            {
                "Valdkond": "SV",
                "Tase": "614",
                "Kood": "162797",
                "Õppekava": "Kesk- ja Ida-Euroopa, Venemaa ja Euraasia uuringud	",
                "1. aasta PÕ": "10",
                "2. aasta PÕ": "10"           
            },
            {
                "Valdkond": "MV",
                "Tase": "614",
                "Kood": "2625",
                "Õppekava": "Rahvatervishoid",
                "1. aasta PÕ": "1",
                "2. aasta PÕ": "17"            
            },
            {
                "Valdkond": "LT",
                "Tase": "5614",
                "Kood": "144919",
                "Õppekava": "Infotehnoloogia mitteinformaatikutele",
                "2. aasta SÕ": "1"
            },
            {
                "Valdkond": "HV",
                "Tase": "734",
                "Kood": "80354",
                "Õppekava": "Eesti ja soome-ugri keeleteadus",
                "4. aasta PÕ": "2"            
            },
            {
                "Valdkond": "SV",
                "Tase": "734",
                "Kood": "80338",
                "Õppekava": "Haridusteadus (LT)",
                "4. aasta PÕ": "1"            
            },
            {
                "Valdkond": "MV",
                "Tase": "734",
                "Kood": "80360",
                "Õppekava": "Arstiteadus",
                "2. aasta PÕ": "1",
                "3. aasta PÕ": "2",
                "4. aasta PÕ": "1"            
            },
            {
                "Valdkond": "LT",
                "Tase": "734",
                "Kood": "80615",
                "Õppekava": "Tehnika ja tehnoloogia",
                "1. aasta PÕ": "1",
                "2. aasta PÕ": "1",
                "3. aasta PÕ": "1",
                "4. aasta PÕ": "3"
            }
        ]

        //funktsioon
        function CreateTableFromJSON(id, data) {
   	 
        //tabeli päise jaoks andmete leidmine
            //var col = [];
            //for (var i = 0; i < data.length; i++) {
                //for (var key in data[i]) {
                    //if (col.indexOf(key) === -1) {
                    //    col.push(key);
                    //}
                //}
            //}
            var col = [
                "Valdkond",
                "Tase",
                "Kood",
                "Õppekava",
                "1. aasta PÕ",
                "1. aasta SÕ",
                "2. aasta PÕ", 
                "2. aasta SÕ",
                "3. aasta PÕ",
                "3. aasta SÕ",
                "4. aasta PÕ",
                "4. aasta SÕ",
                "5. aasta PÕ",
                "5. aasta SÕ",
                "6. aasta PÕ",
                "6. aasta SÕ"]

 
            // dünaamilise tabeli loomine
            var table = document.createElement("table");
 
            // tabeli päise loomine leitud andmete abil
             var tr = table.insertRow(-1);               	// tabeli rida
 
            for (var i = 0; i < col.length; i++) {
                var th = document.createElement("th");  	// tabeli päis
                th.innerHTML = col[i];
                tr.appendChild(th);
            }
 
            // jsoni andmete lisamine tabelisse ridadena
            for (var i = 0; i < data.length; i++) {
 
                tr = table.insertRow(-1);
 
                for (var j = 0; j < col.length; j++) {
                    var tabCell = tr.insertCell(-1);
                    tabCell.innerHTML = data[i][col[j]];
                    if (data[i][col[j]] == undefined){
                       tabCell.innerHTML = "";
                    }
                    if ([col[j]] == "Õppekava"){
                       tabCell.innerHTML = data[i][col[j]].link("https://ois2.ut.ee/#/curricula/"+String(data[i][col[j-1]]));
                    }
                }
            }
 
            // loodud jsoni andmetega tabeli lisamine konteinerisse
            var divContainer = document.getElementById(id);
            divContainer.innerHTML = "";
            divContainer.appendChild(table);
    }
         
        //CreateTableFromJSON("showDataB", myData1);
        //CreateTableFromJSON("showDataM", myData2);
        //CreateTableFromJSON("showDataD", myData3);
        CreateTableFromJSON("showData", myData);

        //collapsible headings
        var coll = document.getElementsByClassName("collapsible");
        var i;

        for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.maxHeight){
            content.style.maxHeight = null;
            } else {
            content.style.maxHeight = content.scrollHeight + "px";
            } 
        });
        }
    </script>
</body>
</html>