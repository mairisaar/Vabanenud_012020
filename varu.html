<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="img/favicon-32.png" type="image/x-icon">
    <link type="text/css" rel="stylesheet" href="normalize.css" />
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Rubik:400,500,700,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <title>Vabanenud õppekohad Tartu Ülikoolis</title>
</head>
<body>
    <!--päis-->
    <header>
        <div class="beauty">
            <div class="img"></div>
            <div class="light"></div>
            <div class="main"></div>
        </div>
        <img class="logo"src="img/horisontaal-v.svg" alt="Tartu Ülikooli logo">
    </header>

    <!--sisu-->
    <section>
        
        <!---üldinfo tekst-->
        <div class="info">
            <h1>Vabanenud õppekohad Tartu Ülikoolis</h1>
            
            <p>Vastavalt Tartu Ülikooli <a href="http://www.ut.ee/oke" target="_blank">õppekorralduseeskirjale</a> täidetakse vabad õppekohad avaliku konkursi korras semestri algusest arvates nelja nädala jooksul. Esimese õppeaasta sügissemestril vabu õppekohti ei täideta.</p>
            <p>Lisainfo <a href="https://www.ut.ee/et/oppimine/uliopilasele/oppekohad/vabad_kohad" target="_blank">vabale õppekohale kandideerimise kohta</a>.</p>
            
            <!--lühendid-->
            <a href="#pop-up">Lühendid</a>

            <!--andmed seisuga kuupäev-->
            <p id="showDate1"></p>

        </div>

        <!--otsinguväli-->
        <div id="s" class="search">
            <i class="material-icons search-icon">search</i>
   	        <input type="text" id="myInput" class="searchfield" onkeyup="mySearch()" placeholder="Õppekava, valdkond, tase või kood">
        </div>

        <!--tabel andmetega-->
        <div class="data" id="showData"></div>


    </section>

    <!--jalus-->
    <footer>
        <p>Õppeosakond ois.tugi@ut.ee</p>
        <div class="shape"></div>
    </footer>

    <!--mõistete pop-up aken-->
    <div id="pop-up" class="overlay"> <!--pooleldi läbipaistev overlay-->
        <div class="modal"><!--pop-up aken-->
            <a class="close" href="#s">&times;</a> <!--ristike pop-up akna sulgemiseks-->
            <div class="modal-content"><!--õppevormide selgitus-->
                <div class="modal-content-h">
                    <h1>Õppevormid</h1>
                </div>
                <div class="modal-content-p">
                    <div class="term">
                        <h2>PÕ</h2>
                        <p>päevaõpe</p>
                    </div>
                    <div class="term">
                        <h2>SÕ</h2>
                        <p>sessioonõpe</p>
                    </div>
                </div>
            </div>
            <div class="modal-content"><!--valdkondade selgitus-->
                <div class="modal-content-h">
                    <h1>Valdkonnad</h1>
                </div>
                <div class="modal-content-p">
                    <div class="term">
                        <h2>HV</h2>
                        <p>humanitaarteaduste ja kunstide valdkond</p>
                    </div>
                    <div class="term">
                        <h2>SV</h2>
                        <p>sotsiaalteaduste valdkond</p>
                    </div>
                    <div class="term">
                        <h2>MV</h2>
                        <p>meditsiiniteaduste valdkond</p>
                    </div>
                    <div class="term">
                        <h2>LT</h2>
                        <p>loodus- ja täppisteaduste valdkond</p>
                    </div>
                </div>
            </div>
            <div class="modal-content"><!--tasemete selgitus-->
                <div class="modal-content-h">
                    <h1>Tasemed</h1>
                    <h3>HTM õppekava haridustase</h3>
                </div>
                <div class="modal-content-p">
                    <div class="modal-content-p-sub">
                        <h3>Kõrghariduse 1. aste</h3>
                        <div class="term">
                            <h2>503</h2>
                            <p>integreeritud õpe (bakalaureuseõpe + magistriõpe)</p>
                        </div>
                        <div class="term">
                            <h2>511</h2>
                            <p>bakalaureuseõpe</p>
                        </div>
                        <div class="term">
                            <h2>514</h2>
                            <p>rakenduskõrgharidusõpe</p>
                        </div>
                    </div>
                    <div class="modal-content-p-sub">
                        <h3>Kõrghariduse 2. aste</h3>
                        <div class="term">
                            <h2>614</h2>
                            <p>magistriõpe (3+2)</p>
                        </div>
                    </div>
                    <div class="modal-content-p-sub">    
                        <h3>Kõrghariduse 3. aste</h3>
                        <div class="term">
                            <h2>734</h2>
                            <p>doktoriõpe</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!--javascript-->
    <script>

        // andmed seisuga kuupäeva kuvamine
        var myDate = {kuupäev: "30.03.2020", kell: "00:20"};
        function ShowUpdateDate(id, date){
        document.getElementById(id).innerHTML = "Andmed seisuga " + date.kuupäev + " kell " + date.kell;
        }

        ShowUpdateDate("showDate1", myDate); //kutsun funktsiooni välja


        //otsing tabelist valdkonna, koodi, taseme ja õppekava nimetuse järgi
        function mySearch() {

        // muutujad
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("myInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("showData");
            tr = table.getElementsByTagName("tr");

            // vaata läbi tabeli read, peida read, mis ei vasta otsingule
            for (i = 0; i < tr.length; i++) {
                td1 = tr[i].getElementsByTagName("td")[0];
   	            td2 = tr[i].getElementsByTagName("td")[1];
    	        td3 = tr[i].getElementsByTagName("td")[2];
    	        td4 = tr[i].getElementsByTagName("td")[3];
                if (td1 || td2 || td3 || td4) {
                txtValue1 = td1.textContent || td1.innerText;
     	        txtValue2 = td2.textContent || td2.innerText;
     	        txtValue3 = td3.textContent || td3.innerText;
     	        txtValue4 = td4.textContent || td4.innerText;
                if (txtValue1.toUpperCase().indexOf(filter) > -1 || txtValue2.toUpperCase().indexOf(filter) > -1 || txtValue3.toUpperCase().indexOf(filter) > -1 || txtValue4.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                    }
                }
            }
        }




        //tabeli kuvamine
        
        //json objekt 
        //**** !!!! see jätta välja, andmed võetakse failist
        var myData = [
            {
                "Valdkond": "HV",
                "Tase": "514",
                "Kood": "120187",
                "Õppekava": "Infokorraldus",
                "1. aasta PÕ": "",
                "1. aasta SÕ": "",
                "2. aasta PÕ": "3",
                "2. aasta SÕ": "2",
                "3. aasta PÕ": "5",
                "3. aasta SÕ": "6",
                "4. aasta PÕ": "",
                "4. aasta SÕ": "",
                "5. aasta PÕ": "",
                "5. aasta SÕ": "",
                "6. aasta PÕ": "",
                "6. aasta SÕ": ""            
            },
            {
                "Valdkond": "SV",
                "Tase": "511",
                "Kood": "3132",
                "Õppekava": "Koolieelse lasteasutuse õpetaja mitmekeelses õppekeskkonnas	",
                "1. aasta SÕ": "1",
                "3. aasta PÕ": "6",
                "3. aasta SÕ": "1"            
            },
            {
                "Valdkond": "MV",
                "Tase": "503",
                "Kood": "80418",
                "Õppekava": "Arstiteadus",
                "1. aasta PÕ": "3",
                "2. aasta PÕ": "17",
                "3. aasta PÕ": "32",
                "4. aasta PÕ": "31",
                "5. aasta PÕ": "44",
                "6. aasta PÕ": "38"            
            },
            {
                "Valdkond": "LT",
                "Tase": "511",
                "Kood": "144301",
                "Õppekava": "Füüsika, keemia ja materjaliteadus	",
                "1. aasta PÕ": "7",
                "2. aasta PÕ": "24",
                "3. aasta PÕ": "47"           
            },
            {
                "Valdkond": "HV",
                "Tase": "614",
                "Kood": "136599",
                "Õppekava": "Võõrkeeleõpetaja",
                "1. aasta PÕ": "2",
                "1. aasta SÕ": "1",
                "2. aasta PÕ": "1",
                "2. aasta SÕ": "3"
            },
            {
                "Valdkond": "SV",
                "Tase": "614",
                "Kood": "162797",
                "Õppekava": "Kesk- ja Ida-Euroopa, Venemaa ja Euraasia uuringud	",
                "1. aasta PÕ": "10",
                "2. aasta PÕ": "10"           
            },
            {
                "Valdkond": "MV",
                "Tase": "614",
                "Kood": "2625",
                "Õppekava": "Rahvatervishoid",
                "1. aasta PÕ": "1",
                "2. aasta PÕ": "17"            
            },
            {
                "Valdkond": "LT",
                "Tase": "614",
                "Kood": "144919",
                "Õppekava": "Infotehnoloogia mitteinformaatikutele",
                "2. aasta SÕ": "1"
            },
            {
                "Valdkond": "HV",
                "Tase": "734",
                "Kood": "80354",
                "Õppekava": "Eesti ja soome-ugri keeleteadus",
                "4. aasta PÕ": "2"            
            },
            {
                "Valdkond": "SV",
                "Tase": "734",
                "Kood": "80338",
                "Õppekava": "Haridusteadus (LT)",
                "4. aasta PÕ": "1"            
            },
            {
                "Valdkond": "MV",
                "Tase": "734",
                "Kood": "80360",
                "Õppekava": "Arstiteadus",
                "2. aasta PÕ": "1",
                "3. aasta PÕ": "2",
                "4. aasta PÕ": "1"            
            },
            {
                "Valdkond": "LT",
                "Tase": "734",
                "Kood": "80615",
                "Õppekava": "Tehnika ja tehnoloogia",
                "1. aasta PÕ": "1",
                "2. aasta PÕ": "1",
                "3. aasta PÕ": "1",
                "4. aasta PÕ": "3"
            }
        ]

        //**** !!!!
        //**** !!!!
        //**** !!!!
        // **** !!!! See osa tuleb väljakommenteerimisest vabastada  
        //JSON failist andmete lugemine
/*        
        var fail = './andmed.json';
        var vabadeKohtadeAndmed = [];

        async function getAndmed(){
            var response = await fetch(fail);
            var andmed = await response.json();
            CreateTableFromJSON("showData", andmed); // kutsun välja tabeli loomise funktsiooni
        };
           
        getAndmed();
*/
        //tabeli loomine
        function CreateTableFromJSON(id, data) {
   	 
        //tabeli päise jaoks andmete leidmine 
            var col = [];
            for (var i = 0; i < data.length; i++) {
                for (var key in data[i]) {
                    if (col.indexOf(key) === -1) {
                        col.push(key);
                    }
                }
            }
 
            // tabeli elemendi loomine
            var table = document.createElement("table");
 
            // tabeli päise loomine leitud andmete abil
            var tr = table.insertRow(-1);               	// tabeli rida
 
            for (var i = 0; i < col.length; i++) {
                var th = document.createElement("th");  	// tabeli päis
                th.innerHTML = col[i];
                tr.appendChild(th);
            }
 
            // jsoni andmete lisamine tabelisse ridadena
            for (var i = 0; i < data.length; i++) {
 
                tr = table.insertRow(-1);
 
                for (var j = 0; j < col.length; j++) {
                    var tabCell = tr.insertCell(-1);
                    tabCell.innerHTML = data[i][col[j]];
                    //väärtuseta andmeväljad kuvada tühjana, mitte tekst 'undefined'
                    if (data[i][col[j]] == undefined || data[i][col[j]] == ""){
                       tabCell.innerHTML = "";
                       tabCell.classList.add("empty");
                    }
                    //õppekava nimetus lingiks ÕIS2 õppekava üldandmete lehele
                    if ([col[j]] == "Õppekava"){
                       tabCell.innerHTML = data[i][col[j]].link("https://ois2.ut.ee/#/curricula/"+String(data[i][col[j-1]]));
                    }
                    //valdkond ja tase lingiks, avavad mõistete selgituse pop-up akna
                    if ([col[j]] == "Valdkond" || [col[j]] == "Tase"){
                        tabCell.innerHTML = data[i][col[j]].link("#pop-up")
                    }
                }
            }
 
            // loodud jsoni andmetega tabeli lisamine konteinerisse
            var divContainer = document.getElementById(id);
            divContainer.innerHTML = "";
            divContainer.appendChild(table);
    }

        //kutsun tabeli loomise funktsiooni välja
        // **** !!!!
        // **** !!!!
        // **** !!!!
        // **** !!!! seda ei ole vaja kui andmed loetakse failist
        CreateTableFromJSON("showData", myData); 

        /*const fileInput = document.querySelector('#fileInput');
            fileInput.addEventListener('change', (event) => {
            // files is a FileList object (similar to NodeList) 
            const files = event.target.files;

            for (let file of files) {
                const date = new Date(file.lastModified);
                console.log(`${file.name} has a last modified date of ${date}`);
            }
            });*/
        
    </script>

</body>
</html>